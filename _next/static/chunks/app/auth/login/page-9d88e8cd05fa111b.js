(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[716],{2154:function(e,t,r){Promise.resolve().then(r.bind(r,9175))},9175:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return u}});var s=r(7437),a=r(2265),n=r(1865),o=r(1490),l=r(1735),i=r(4033),c=r(4606),d=e=>{let{label:t,register:r,required:n,name:o,minLength:l,maxLength:i,errors:d,valueAsNumber:u,type:m="text",readOnly:p,placeholder:x,autoComplete:h="on",addClass:f,value:y}=e,[g,b]=(0,a.useState)(!1);return(0,s.jsxs)("div",{className:f,children:[(0,s.jsx)("label",{htmlFor:o,className:"text-sm font-medium text-gray-700 tracking-wide",children:t}),n&&(0,s.jsx)("span",{className:"ml-1 text-red-600",children:"*"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{className:"w-full text-base px-4 py-2 border  border-gray-300 rounded-lg focus:outline-none focus:border-secondary",type:"password"===m?g?"text":"password":m,id:o,readOnly:p,placeholder:x,autoComplete:h,...r(o,{required:n,minLength:l,maxLength:i,valueAsNumber:u}),value:y}),"password"===m&&(0,s.jsx)("div",{className:"absolute right-2 top-0 flex items-center h-full cursor-pointer text-secondary",onClick:()=>{b(!g)},children:g?(0,s.jsx)(c.rCC,{size:20}):(0,s.jsx)(c.I$m,{size:20})})]}),(null==d?void 0:d.type)==="required"&&(0,s.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[t," tidak boleh kosong"]}),(null==d?void 0:d.type)==="minLength"&&(0,s.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[t," tidak boleh kurang dari ",l," karakter"]}),(null==d?void 0:d.type)==="maxLength"&&(0,s.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[t," tidak boleh lebih dari ",i," karakter"]}),(null==d?void 0:d.type)==="pattern"&&(0,s.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[t," hanya boleh angka."]})]})},u=e=>{let{setLogin:t,cekToken:r}=(0,l.Z)(),c=(0,i.useRouter)(),[u,m]=(0,a.useState)(""),[p,x]=(0,a.useState)(!1),h=async()=>{};(0,a.useEffect)(()=>(console.log("cek apakah sudah login atau belum"),h(),()=>{}),[]);let f=async()=>{let e=o.Z.get("token");if(e){let e=await r();console.log({cekAuth:e}),(null==e?void 0:e.error)||(console.log("sudah login"),c.push("/admin"))}x(!1)};(0,a.useEffect)(()=>{f()},[]);let{register:y,handleSubmit:g,formState:{errors:b}}=(0,n.cI)(),v=async e=>{var r;x(!0);let s=await t(e);if(null==s?void 0:s.error)m(null==s?void 0:null===(r=s.error)||void 0===r?void 0:r.pesan);else{let{data:e}=s;o.Z.set("token",e.token),o.Z.set("role",e.role),c.push("/admin")}setTimeout(()=>{x(!1)},1e3)};return console.log({error:u}),(0,s.jsx)("div",{className:"min-h-screen bg-login bg-cover bg-center py-6 flex flex-col justify-center sm:py-12",children:(0,s.jsxs)("div",{className:"relative py-3 sm:max-w-xl sm:mx-auto",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-primary to-thirdary shadow-lg transform -skew-y-6 sm:skew-y-0 sm:-rotate-6 sm:rounded-3xl"}),(0,s.jsx)("div",{className:"relative px-4 py-10 bg-white shadow-lg sm:rounded-3xl sm:p-10",children:(0,s.jsxs)("div",{className:"max-w-md mx-auto",children:[(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsx)("h1",{className:"text-xl font-semibold md:text-2xl text-center",children:"Login Admin Kampung Holtekamp"})}),u&&(0,s.jsx)("p",{className:"text-center text-red-500",children:u}),(0,s.jsx)("div",{className:"divide-y divide-gray-200 mt-2",children:(0,s.jsxs)("form",{onSubmit:g(v),children:[(0,s.jsx)("div",{children:(0,s.jsx)(d,{label:"Email",name:"email",register:y,required:!0,minLength:3,errors:b.email,addClass:"w-[100%]",type:"email"})}),(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsx)(d,{label:"Password",name:"password",register:y,required:!0,minLength:3,errors:b.password,addClass:"w-[100%]",type:"password"})}),p?(0,s.jsx)("p",{children:"Loading..."}):(0,s.jsx)("button",{type:"submit",className:"w-full block bg-primary hover:bg-primary/90 focus:bg-primary text-white font-semibold rounded-lg px-4 py-3 mt-6",children:"Login"})]})})]})})]})})}},1485:function(e,t,r){"use strict";r.d(t,{I8:function(){return n},Sj:function(){return o},_n:function(){return a},hi:function(){return l}});var s=r(9222);let a="https://admin.holtekamp.com",n=s.Z.create({baseURL:"".concat(a,"/auth")}),o=s.Z.create({baseURL:"".concat(a,"/crud")}),l=s.Z.create({baseURL:"".concat(a,"/api")});s.Z.create({baseURL:"".concat(a,"/storage")})},1735:function(e,t,r){"use strict";var s=r(4660),a=r(4810),n=r(1485),o=r(1490);let l=(0,s.Ue)((0,a.mW)((e,t)=>({setToken:async()=>{let e=o.Z.get("token");return e},setLogin:async e=>{try{let t=await (0,n.I8)({method:"post",url:"/login",data:e});return{status:"success",data:t.data}}catch(e){return{status:"error",error:e.response.data}}},cekToken:async()=>{let e=await t().setToken();try{let t=await (0,n.I8)({method:"post",url:"/cek_token",headers:{Authorization:"Bearer ".concat(e)}});return{status:"success",data:t.data}}catch(e){return{status:"error",error:e.response.data}}}})));t.Z=l},622:function(e,t,r){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s=r(2265),a=Symbol.for("react.element"),n=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,l=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,r){var s,n={},c=null,d=null;for(s in void 0!==r&&(c=""+r),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)o.call(t,s)&&!i.hasOwnProperty(s)&&(n[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps)void 0===n[s]&&(n[s]=t[s]);return{$$typeof:a,type:e,key:c,ref:d,props:n,_owner:l.current}}t.Fragment=n,t.jsx=c,t.jsxs=c},7437:function(e,t,r){"use strict";e.exports=r(622)}},function(e){e.O(0,[447,222,628,382,971,596,560],function(){return e(e.s=2154)}),_N_E=e.O()}]);