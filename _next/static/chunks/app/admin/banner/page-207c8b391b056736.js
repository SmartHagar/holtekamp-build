(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[451],{930:function(e,a,t){Promise.resolve().then(t.bind(t,437))},437:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return _}});var r=t(7437),s=t(2265),n=t(232),l=t(8900),d=t(3628),i=t(4660),o=t(4810),u=t(1485),c=t(1735);let h=(0,i.Ue)((0,o.mW)((e,a)=>({setFormData:e=>{let a=new FormData;return a.append("gambar",e.gambar),a.append("status",e.status),a},dtBanner:[],showBanner:[],setBanner:async a=>{let{page:t=1,limit:r=10,search:s,tipe:n}=a;try{let a=await c.Z.getState().setToken(),l=await (0,u.Sj)({method:"get",url:"/banner",headers:{Authorization:"Bearer ".concat(a)},params:{limit:r,page:t,search:s,tipe:n}});return e(e=>({...e,dtBanner:l.data.data})),{status:"berhasil",data:l.data}}catch(e){var l;return{status:"error",error:null===(l=e.response)||void 0===l?void 0:l.data}}},setShowBanner:async a=>{try{let t=await c.Z.getState().setToken(),r=await (0,u.Sj)({method:"get",url:"/banner/".concat(a),headers:{Authorization:"Bearer ".concat(t)}});return e(e=>({...e,showBanner:r.data.data})),{status:"berhasil",data:r.data}}catch(e){var t;return{status:"error",error:null===(t=e.response)||void 0===t?void 0:t.data}}},addData:async t=>{let r=(null==t?void 0:t.gambar)?a().setFormData(t):t;try{let a=await c.Z.getState().setToken(),t=await (0,u.Sj)({method:"post",url:"/banner",headers:{Authorization:"Bearer ".concat(a),"Content-Type":"multipart/form-data"},data:r});return e(e=>({dtBanner:{last_page:e.dtBanner.last_page,current_page:e.dtBanner.current_page,data:[t.data.data,...e.dtBanner.data]}})),{status:"berhasil tambah",data:t.data}}catch(e){return{status:"error",data:e.response.data}}},removeData:async a=>{try{let t=await c.Z.getState().setToken(),r=await (0,u.Sj)({method:"delete",url:"/banner/".concat(a),headers:{Authorization:"Bearer ".concat(t)}});return e(e=>({dtBanner:{last_page:e.dtBanner.last_page,current_page:e.dtBanner.current_page,data:e.dtBanner.data.filter(e=>e.id!==a)}})),{status:"berhasil hapus",data:r.data}}catch(e){return{status:"error",data:e.response.data}}},updateData:async(t,r)=>{delete r.id;let s=(null==r?void 0:r.gambar)?a().setFormData(r):r,n=await c.Z.getState().setToken();try{let a=await (0,u.Sj)({url:"/banner/".concat(t),method:"post",headers:(null==r?void 0:r.gambar)?{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(n)}:{Authorization:"Bearer ".concat(n)},data:s,params:{_method:"PUT"}});return e(e=>({dtBanner:{last_page:e.dtBanner.last_page,current_page:e.dtBanner.current_page,data:e.dtBanner.data.map(e=>e.id===t?{...e,...a.data.data}:e)}})),{status:"berhasil update",data:a.data}}catch(e){return{status:"error",data:e.response.data}}}})));var m=e=>{let{setDelete:a,setEdit:t,search:i}=e,{setBanner:o,dtBanner:u}=h(),[c,m]=(0,s.useState)(1),[p,g]=(0,s.useState)(10),[x,b]=(0,s.useState)(!0),f=async()=>{await o({page:c,limit:p,search:i}),b(!1)};return(0,s.useEffect)(()=>(f(),()=>{}),[c,p]),(0,s.useEffect)(()=>{m(1),f()},[i]),(0,r.jsx)("div",{className:"flex-1 flex-col max-w-full h-full overflow-auto",children:x?(0,r.jsx)(n.Z,{}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"",children:(0,r.jsx)(d.Z,{headTable:["No","Status","Gambar","Aksi"],tableBodies:["status","gambar"],dataTable:u.data,page:c,limit:p,setEdit:t,setDelete:a,ubah:!0,hapus:!0})}),(null==u?void 0:u.last_page)>1&&(0,r.jsx)("div",{className:"mt-4",children:(0,r.jsx)(l.Z,{currentPage:null==u?void 0:u.current_page,totalPages:null==u?void 0:u.last_page,setPage:m})})]})})},p=t(8981),g=t(1360),x=t(9290),b=t(4004),f=t(1865),j=t(629);let v=e=>{let{label:a,register:t,required:s,name:n,readOnly:l,placeholder:d,defaultOption:i,options:o=[],errors:u,addClass:c}=e;return(0,r.jsxs)("div",{className:c,children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-700 tracking-wide",children:a}),s&&(0,r.jsx)("span",{className:"ml-1 text-red-600",children:"*"}),(0,r.jsx)("div",{className:"relative",children:(0,r.jsxs)("select",{className:"w-full rounded-lg py-2 px-2 bg-white border border-gray-300 focus:outline-none focus:border-secondary",id:a,readOnly:l,placeholder:d,...t(n,{required:s}),children:[(0,r.jsx)("option",{value:"",children:i}),o.map((e,a)=>(0,r.jsx)("option",{value:e.value,children:e.label},a))]})}),(null==u?void 0:u.type)==="required"&&(0,r.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[a," tidak boleh kosong"]})]})};t(3159);var w=e=>{let{register:a,errors:t,control:s,dtEdit:n,watch:l,setValue:d,showModal:i,myFile:o,setMyFile:u}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(v,{label:"Status",defaultOption:"Pilih Status",register:a,errors:t.status,required:!0,name:"status",options:[{value:"Aktif",label:"Aktif"},{value:"Tidak Aktif",label:"Tidak Aktif"}],addClass:"col-span-4 lg:col-span-2"}),(0,r.jsx)(j.Z,{label:"Gambar",name:"gambar",register:a,accept:"image/*",errors:t.gambar,addClass:"col-span-4",setValue:d,required:!0,fileEdit:null==n?void 0:n.gambar,myFile:o,setMyFile:u})]})},y=e=>{let{showModal:a,setShowModal:t,dtEdit:n}=e,[l,d]=(0,s.useState)(),{addData:i,updateData:o}=h(),{register:u,handleSubmit:c,setValue:m,control:j,formState:{errors:v},watch:y}=(0,f.cI)(),S=()=>{m("id",""),m("status",""),m("gambar",""),d(null)};(0,s.useEffect)(()=>{n?(m("id",n.id),m("status",n.status),m("gambar",n.gambar)):S()},[a,n]);let B=async e=>{if(console.log({row:e}),n){let{data:a}=await o(n.id,e);(0,b.Z)({event:a}),t(!1)}else{let{data:a}=await i(e);console.log({data:a}),(0,b.Z)({event:a}),(null==a?void 0:a.type)!=="success"||S()}};return(0,r.jsx)(x.Z,{title:"Form Banner",showModal:a,setShowModal:t,children:(0,r.jsxs)("form",{onSubmit:c(B),children:[(0,r.jsx)(g.Z,{name:"id",register:u,type:"hidden"}),(0,r.jsx)("div",{className:"grid grid-cols-4 gap-2 mb-4",children:(0,r.jsx)(w,{register:u,errors:v,dtEdit:n,control:j,watch:y,setValue:m,showModal:a,myFile:l,setMyFile:d})}),(0,r.jsx)("div",{children:(0,r.jsx)(p.Z,{text:"Simpan",onClick:c(B)})})]})})},S=t(4941),B=t(5925),k=t(1788),_=()=>{let{removeData:e}=h(),[a,t]=(0,s.useState)(!1),[n,l]=(0,s.useState)(!1),[d,i]=(0,s.useState)(),[o,u]=(0,s.useState)(),[c,g]=(0,s.useState)(""),x=async a=>{let{id:t,isDelete:r}=a;if(i(t),r){let{data:a}=await e(d);(0,b.Z)({event:a}),l(!1)}else l(!0)};return(0,r.jsxs)("div",{className:"flex flex-col h-full",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(B.x7,{}),(0,r.jsx)(y,{dtEdit:o,showModal:a,setShowModal:t}),(0,r.jsx)(S.Z,{showDel:n,setShowDel:l,setDelete:x}),(0,r.jsxs)("div",{className:"mb-4 flex justify-between",children:[(0,r.jsx)("p",{children:"Silahkan Mengolah data Banner"}),(0,r.jsx)("div",{children:(0,r.jsx)(p.Z,{text:"Tambah Banner",onClick:()=>{t(!0),u(null)}})})]}),(0,r.jsx)(k.Z,{placeholder:"Cari Banner",onChange:e=>g(e)})]}),(0,r.jsx)(m,{setDelete:x,setEdit:e=>{t(!0),u(e)},search:c})]})}},1788:function(e,a,t){"use strict";var r=t(7437);t(2265),a.Z=e=>{let{placeholder:a,addClass:t,onChange:s,defaultValue:n=""}=e;return(0,r.jsx)("div",{className:t,children:(0,r.jsx)("input",{className:"w-full text-gray-700 px-4 py-2 border  border-gray-300 rounded-lg focus:outline-none focus:border-secondary",placeholder:a,onChange:e=>{s(e.target.value)},defaultValue:n})})}}},function(e){e.O(0,[447,990,954,222,628,382,769,295,662,971,596,560],function(){return e(e.s=930)}),_N_E=e.O()}]);