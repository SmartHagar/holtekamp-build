(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[439],{7841:function(a,t,e){Promise.resolve().then(e.bind(e,2385))},2385:function(a,t,e){"use strict";e.r(t),e.d(t,{default:function(){return y}});var r=e(7437),s=e(2265),n=e(232),d=e(8900),i=e(3628),l=e(4660),o=e(4810),u=e(1485),g=e(1735);let c=(0,l.Ue)((0,o.mW)((a,t)=>({setFormData:a=>{let t=new FormData;return t.append("gambar",a.gambar),t.append("kegiatan_id",a.kegiatan_id),t},dtGambarKegiatan:[],showGambarKegiatan:[],setGambarKegiatan:async t=>{let{page:e=1,limit:r=10,search:s,kegiatan_id:n}=t;try{let t=await g.Z.getState().setToken(),d=await (0,u.Sj)({method:"get",url:"/gambar-kegiatan",headers:{Authorization:"Bearer ".concat(t)},params:{limit:r,page:e,search:s,kegiatan_id:n}});return a(a=>({...a,dtGambarKegiatan:d.data.data})),{status:"berhasil",data:d.data}}catch(a){var d;return{status:"error",error:null===(d=a.response)||void 0===d?void 0:d.data}}},setShowGambarKegiatan:async t=>{try{let e=await g.Z.getState().setToken(),r=await (0,u.Sj)({method:"get",url:"/gambar-kegiatan/".concat(t),headers:{Authorization:"Bearer ".concat(e)}});return a(a=>({...a,showGambarKegiatan:r.data.data})),{status:"berhasil",data:r.data}}catch(a){var e;return{status:"error",error:null===(e=a.response)||void 0===e?void 0:e.data}}},addData:async e=>{let r=(null==e?void 0:e.gambar)?t().setFormData(e):e;try{let t=await g.Z.getState().setToken(),e=await (0,u.Sj)({method:"post",url:"/gambar-kegiatan",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"multipart/form-data"},data:r});return a(a=>({dtGambarKegiatan:{last_page:a.dtGambarKegiatan.last_page,current_page:a.dtGambarKegiatan.current_page,data:[e.data.data,...a.dtGambarKegiatan.data]}})),{status:"berhasil tambah",data:e.data}}catch(a){return{status:"error",data:a.response.data}}},removeData:async t=>{try{let e=await g.Z.getState().setToken(),r=await (0,u.Sj)({method:"delete",url:"/gambar-kegiatan/".concat(t),headers:{Authorization:"Bearer ".concat(e)}});return a(a=>({dtGambarKegiatan:{last_page:a.dtGambarKegiatan.last_page,current_page:a.dtGambarKegiatan.current_page,data:a.dtGambarKegiatan.data.filter(a=>a.id!==t)}})),{status:"berhasil hapus",data:r.data}}catch(a){return{status:"error",data:a.response.data}}},updateData:async(e,r)=>{delete r.id;let s=(null==r?void 0:r.gambar)?t().setFormData(r):r,n=await g.Z.getState().setToken();try{let t=await (0,u.Sj)({url:"/gambar-kegiatan/".concat(e),method:"post",headers:(null==r?void 0:r.gambar)?{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(n)}:{Authorization:"Bearer ".concat(n)},data:s,params:{_method:"PUT"}});return a(a=>({dtGambarKegiatan:{last_page:a.dtGambarKegiatan.last_page,current_page:a.dtGambarKegiatan.current_page,data:a.dtGambarKegiatan.data.map(a=>a.id===e?{...a,...t.data.data}:a)}})),{status:"berhasil update",data:t.data}}catch(a){return{status:"error",data:a.response.data}}}})));var h=a=>{let{setDelete:t,setEdit:e,search:l,kegiatan_id:o}=a,{setGambarKegiatan:u,dtGambarKegiatan:g}=c(),[h,m]=(0,s.useState)(1),[p,b]=(0,s.useState)(10),[w,_]=(0,s.useState)(!0),v=async()=>{await u({page:h,limit:p,search:l,kegiatan_id:o}),_(!1)};return(0,s.useEffect)(()=>(v(),()=>{}),[h,p]),(0,s.useEffect)(()=>{m(1),v()},[l]),(0,r.jsx)("div",{className:"flex-1 flex-col max-w-full h-full overflow-auto",children:w?(0,r.jsx)(n.Z,{}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"",children:(0,r.jsx)(i.Z,{headTable:["No","Gambar","Aksi"],tableBodies:["gambar"],dataTable:g.data,page:h,limit:p,setEdit:e,setDelete:t,ubah:!0,hapus:!0})}),(null==g?void 0:g.last_page)>1&&(0,r.jsx)("div",{className:"mt-4",children:(0,r.jsx)(d.Z,{currentPage:null==g?void 0:g.current_page,totalPages:null==g?void 0:g.last_page,setPage:m})})]})})},m=e(8981),p=e(1360),b=e(9290),w=e(4004),_=e(1865),v=e(629);e(3159);var S=a=>{let{register:t,errors:e,control:s,dtEdit:n,watch:d,setValue:i,showModal:l,myFile:o,setMyFile:u}=a;return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(v.Z,{label:"Gambar",name:"gambar",register:t,accept:"image/*",errors:e.gambar,addClass:"col-span-4",setValue:i,required:!0,fileEdit:null==n?void 0:n.gambar,myFile:o,setMyFile:u})})},j=a=>{let{showModal:t,setShowModal:e,dtEdit:n,kegiatan_id:d}=a,[i,l]=(0,s.useState)(),{addData:o,updateData:u}=c(),{register:g,handleSubmit:h,setValue:v,control:j,formState:{errors:K},watch:k}=(0,_.cI)(),f=()=>{v("id",""),v("kegiatan_id",d),v("gambar",""),l(null)};(0,s.useEffect)(()=>{n?(v("id",n.id),v("kegiatan_id",n.kegiatan_id),v("gambar",n.gambar)):f()},[t,n]);let x=async a=>{if(console.log({row:a}),n){let{data:t}=await u(n.id,a);(0,w.Z)({event:t}),e(!1)}else{let{data:t}=await o(a);console.log({data:t}),(0,w.Z)({event:t}),(null==t?void 0:t.type)!=="success"||f()}};return(0,r.jsx)(b.Z,{title:"Form GambarKegiatan",showModal:t,setShowModal:e,children:(0,r.jsxs)("form",{onSubmit:h(x),children:[(0,r.jsx)(p.Z,{name:"id",register:g,type:"hidden"}),(0,r.jsx)(p.Z,{name:"kegiatan_id",register:g,type:"hidden"}),(0,r.jsx)("div",{className:"grid grid-cols-4 gap-2 mb-4",children:(0,r.jsx)(S,{register:g,errors:K,dtEdit:n,control:j,watch:k,setValue:v,showModal:t,myFile:i,setMyFile:l})}),(0,r.jsx)("div",{children:(0,r.jsx)(m.Z,{text:"Simpan",onClick:h(x)})})]})})},K=e(4941),k=e(5925),f=e(4033),x=e(8786),y=()=>{let{removeData:a}=c(),{setShowKegiatan:t,showKegiatan:e}=(0,x.Z)(),[n,d]=(0,s.useState)(!1),[i,l]=(0,s.useState)(!1),[o,u]=(0,s.useState)(),[g,p]=(0,s.useState)(),[b,_]=(0,s.useState)(""),v=(0,f.useSearchParams)(),S=parseInt(v.get("kegiatan_id")||"0");(0,s.useEffect)(()=>{t(S)},[S]);let y=async t=>{let{id:e,isDelete:r}=t;if(u(e),r){let{data:t}=await a(o);(0,w.Z)({event:t}),l(!1)}else l(!0)};return(0,r.jsxs)("div",{className:"flex flex-col h-full",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(k.x7,{}),(0,r.jsx)(j,{dtEdit:g,showModal:n,setShowModal:d,kegiatan_id:S}),(0,r.jsx)(K.Z,{showDel:i,setShowDel:l,setDelete:y}),(0,r.jsxs)("div",{className:"mb-4 flex justify-between",children:[(0,r.jsxs)("p",{children:["Silahkan Mengolah data Gambar Kegiatan ",null==e?void 0:e.nama]}),(0,r.jsx)("div",{children:(0,r.jsx)(m.Z,{text:"Tambah Gambar",onClick:()=>{d(!0),p(null)}})})]})]}),(0,r.jsx)(h,{setDelete:y,setEdit:a=>{d(!0),p(a)},search:b,kegiatan_id:S})]})}},8786:function(a,t,e){"use strict";var r=e(4660),s=e(4810),n=e(1485),d=e(1735);let i=(0,r.Ue)((0,s.mW)((a,t)=>({dtKegiatan:[],showKegiatan:[],setKegiatan:async t=>{let{page:e=1,limit:r=10,search:s}=t;try{let t=await d.Z.getState().setToken(),i=await (0,n.Sj)({method:"get",url:"/kegiatan",headers:{Authorization:"Bearer ".concat(t)},params:{limit:r,page:e,search:s}});return a(a=>({...a,dtKegiatan:i.data.data})),{status:"berhasil",data:i.data}}catch(a){var i;return{status:"error",error:null===(i=a.response)||void 0===i?void 0:i.data}}},setShowKegiatan:async t=>{try{let e=await d.Z.getState().setToken(),r=await (0,n.Sj)({method:"get",url:"/kegiatan/".concat(t),headers:{Authorization:"Bearer ".concat(e)}});return a(a=>({...a,showKegiatan:r.data.data})),{status:"berhasil",data:r.data}}catch(a){var e;return{status:"error",error:null===(e=a.response)||void 0===e?void 0:e.data}}},addData:async t=>{try{let e=await d.Z.getState().setToken(),r=await (0,n.Sj)({method:"post",url:"/kegiatan",headers:{Authorization:"Bearer ".concat(e)},data:t});return a(a=>({dtKegiatan:{last_page:a.dtKegiatan.last_page,current_page:a.dtKegiatan.current_page,data:[r.data.data,...a.dtKegiatan.data]}})),{status:"berhasil tambah",data:r.data}}catch(a){return{status:"error",data:a.response.data}}},removeData:async t=>{try{let e=await d.Z.getState().setToken(),r=await (0,n.Sj)({method:"delete",url:"/kegiatan/".concat(t),headers:{Authorization:"Bearer ".concat(e)}});return a(a=>({dtKegiatan:{last_page:a.dtKegiatan.last_page,current_page:a.dtKegiatan.current_page,data:a.dtKegiatan.data.filter(a=>a.id!==t)}})),{status:"berhasil hapus",data:r.data}}catch(a){return{status:"error",data:a.response.data}}},updateData:async(t,e)=>{try{let r=await d.Z.getState().setToken(),s=await (0,n.Sj)({method:"PUT",url:"/kegiatan/".concat(t),headers:{Authorization:"Bearer ".concat(r)},data:e});return a(a=>({dtKegiatan:{last_page:a.dtKegiatan.last_page,current_page:a.dtKegiatan.current_page,data:a.dtKegiatan.data.map(a=>a.id===t?{...a,...s.data.data}:a)}})),{status:"berhasil update",data:s.data}}catch(a){return{status:"error",data:a.response.data}}}})));t.Z=i}},function(a){a.O(0,[447,990,954,222,628,382,769,295,662,971,596,560],function(){return a(a.s=7841)}),_N_E=a.O()}]);