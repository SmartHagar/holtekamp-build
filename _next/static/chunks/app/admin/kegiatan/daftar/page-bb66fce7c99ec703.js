(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[653],{2170:function(a,e,t){Promise.resolve().then(t.bind(t,1501))},1501:function(a,e,t){"use strict";t.r(e),t.d(e,{default:function(){return Z}});var r=t(7437),s=t(2265),n=t(232),l=t(8900),i=t(3628),d=t(8786),o=t(4033),u=t(4606),c=a=>{let{setDelete:e,setEdit:t,search:c}=a,h=(0,o.useRouter)(),{setKegiatan:g,dtKegiatan:m}=(0,d.Z)(),[x,p]=(0,s.useState)(1),[f,j]=(0,s.useState)(10),[v,b]=(0,s.useState)(!0),w=async()=>{await g({page:x,limit:f,search:c}),b(!1)};return(0,s.useEffect)(()=>(w(),()=>{}),[x,f]),(0,s.useEffect)(()=>{p(1),w()},[c]),(0,r.jsx)("div",{className:"flex-1 flex-col max-w-full h-full overflow-auto",children:v?(0,r.jsx)(n.Z,{}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"",children:(0,r.jsx)(i.Z,{headTable:["No","Nama Kegiatan","Tahun Kegiatan","Aksi"],tableBodies:["nama","tahun"],dataTable:m.data,page:x,limit:f,setEdit:t,setDelete:e,ubah:!0,hapus:!0,costume:a=>(0,r.jsx)("div",{className:"cursor-pointer mr-2",onClick:()=>h.push("/admin/kegiatan/gambar?kegiatan_id=".concat(a.id)),children:(0,r.jsx)(u.vGR,{className:"text-xl"})})})}),(null==m?void 0:m.last_page)>1&&(0,r.jsx)("div",{className:"mt-4",children:(0,r.jsx)(l.Z,{currentPage:null==m?void 0:m.current_page,totalPages:null==m?void 0:m.last_page,setPage:p})})]})})},h=t(8981),g=t(1360),m=t(9290),x=t(4004),p=t(1865),f=t(7704),j=t(2067),v=t.n(j),b=a=>{let{label:e,start:t=2012,end:n=v()().format("YYYY"),control:l,required:i,name:d,errors:o,addClass:u,menuPosition:c="fixed",placeholder:h="Pilih Tahun",fromMax:g=!1}=a,m=()=>{let a=[];if(g)for(let e=n;e>=t;e--)a.push({value:e,label:e});else for(let e=t;e<=n;e++)a.push({value:e,label:e});return a},[x,j]=(0,s.useState)(null);return(0,s.useEffect)(()=>{"undefined"!=typeof document&&j(document.body)},[]),(0,r.jsxs)("div",{className:u,children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-700 tracking-wide",children:e}),i&&(0,r.jsx)("span",{className:"ml-1 text-red-600",children:"*"}),x&&(0,r.jsx)(p.Qr,{name:d,control:l,rules:{required:i},render:a=>{let{field:{onChange:e,value:t,name:s,ref:n}}=a;return(0,r.jsx)(f.ZP,{isClearable:!0,isSearchable:!0,options:m(),placeholder:h,menuPosition:c,menuPortalTarget:document.body,ref:n,value:t?m().find(a=>a.value===t):t,onChange:a=>e(a?a.value:a)})}}),(null==o?void 0:o.type)==="required"&&(0,r.jsx)("p",{className:"text-red-500 font-inter italic text-sm",children:"Tahun tidak boleh kosong"})]})};t(3159);var w=a=>{let{register:e,errors:t,control:s,dtEdit:n,watch:l,setValue:i,showModal:d}=a,o=v()().format("YYYY");return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g.Z,{label:"Nama Kegiatan",name:"nama",register:e,required:!0,errors:t.nama,addClass:"col-span-4"}),(0,r.jsx)(b,{label:"Tahun Kegiatan",name:"tahun",start:2022,end:parseInt(o),control:s,addClass:"col-span-4",placeholder:"Pilih Tahun",required:!0,errors:t.tahun})]})},S=a=>{let{showModal:e,setShowModal:t,dtEdit:n}=a,{addData:l,updateData:i}=(0,d.Z)(),{register:o,handleSubmit:u,setValue:c,control:f,formState:{errors:j},watch:v}=(0,p.cI)(),b=()=>{c("id",""),c("nama",""),c("tahun","")};(0,s.useEffect)(()=>{n?(c("id",n.id),c("nama",n.nama),c("tahun",n.tahun)):b()},[e,n]);let S=async a=>{if(console.log({row:a}),n){let{data:e}=await i(n.id,a);(0,x.Z)({event:e}),t(!1)}else{let{data:e}=await l(a);console.log({data:e}),(0,x.Z)({event:e}),(null==e?void 0:e.type)!=="success"||b()}};return(0,r.jsx)(m.Z,{title:"Form Kegiatan",showModal:e,setShowModal:t,children:(0,r.jsxs)("form",{onSubmit:u(S),children:[(0,r.jsx)(g.Z,{name:"id",register:o,type:"hidden"}),(0,r.jsx)("div",{className:"grid grid-cols-4 gap-2 mb-4",children:(0,r.jsx)(w,{register:o,errors:j,dtEdit:n,control:f,watch:v,setValue:c,showModal:e})}),(0,r.jsx)("div",{children:(0,r.jsx)(h.Z,{text:"Simpan",onClick:u(S)})})]})})},K=t(4941),y=t(5925),k=t(1788),Z=()=>{let{removeData:a}=(0,d.Z)(),[e,t]=(0,s.useState)(!1),[n,l]=(0,s.useState)(!1),[i,o]=(0,s.useState)(),[u,g]=(0,s.useState)(),[m,p]=(0,s.useState)(""),f=async e=>{let{id:t,isDelete:r}=e;if(o(t),r){let{data:e}=await a(i);(0,x.Z)({event:e}),l(!1)}else l(!0)};return(0,r.jsxs)("div",{className:"flex flex-col h-full",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(y.x7,{}),(0,r.jsx)(S,{dtEdit:u,showModal:e,setShowModal:t}),(0,r.jsx)(K.Z,{showDel:n,setShowDel:l,setDelete:f}),(0,r.jsxs)("div",{className:"mb-4 flex justify-between",children:[(0,r.jsx)("p",{children:"Silahkan Mengolah data Kegiatan"}),(0,r.jsx)("div",{children:(0,r.jsx)(h.Z,{text:"Tambah Kegiatan",onClick:()=>{t(!0),g(null)}})})]}),(0,r.jsx)(k.Z,{placeholder:"Cari Kegiatan",onChange:a=>p(a)})]}),(0,r.jsx)(c,{setDelete:f,setEdit:a=>{t(!0),g(a)},search:m})]})}},1788:function(a,e,t){"use strict";var r=t(7437);t(2265),e.Z=a=>{let{placeholder:e,addClass:t,onChange:s,defaultValue:n=""}=a;return(0,r.jsx)("div",{className:t,children:(0,r.jsx)("input",{className:"w-full text-gray-700 px-4 py-2 border  border-gray-300 rounded-lg focus:outline-none focus:border-secondary",placeholder:e,onChange:a=>{s(a.target.value)},defaultValue:n})})}},8786:function(a,e,t){"use strict";var r=t(4660),s=t(4810),n=t(1485),l=t(1735);let i=(0,r.Ue)((0,s.mW)((a,e)=>({dtKegiatan:[],showKegiatan:[],setKegiatan:async e=>{let{page:t=1,limit:r=10,search:s}=e;try{let e=await l.Z.getState().setToken(),i=await (0,n.Sj)({method:"get",url:"/kegiatan",headers:{Authorization:"Bearer ".concat(e)},params:{limit:r,page:t,search:s}});return a(a=>({...a,dtKegiatan:i.data.data})),{status:"berhasil",data:i.data}}catch(a){var i;return{status:"error",error:null===(i=a.response)||void 0===i?void 0:i.data}}},setShowKegiatan:async e=>{try{let t=await l.Z.getState().setToken(),r=await (0,n.Sj)({method:"get",url:"/kegiatan/".concat(e),headers:{Authorization:"Bearer ".concat(t)}});return a(a=>({...a,showKegiatan:r.data.data})),{status:"berhasil",data:r.data}}catch(a){var t;return{status:"error",error:null===(t=a.response)||void 0===t?void 0:t.data}}},addData:async e=>{try{let t=await l.Z.getState().setToken(),r=await (0,n.Sj)({method:"post",url:"/kegiatan",headers:{Authorization:"Bearer ".concat(t)},data:e});return a(a=>({dtKegiatan:{last_page:a.dtKegiatan.last_page,current_page:a.dtKegiatan.current_page,data:[r.data.data,...a.dtKegiatan.data]}})),{status:"berhasil tambah",data:r.data}}catch(a){return{status:"error",data:a.response.data}}},removeData:async e=>{try{let t=await l.Z.getState().setToken(),r=await (0,n.Sj)({method:"delete",url:"/kegiatan/".concat(e),headers:{Authorization:"Bearer ".concat(t)}});return a(a=>({dtKegiatan:{last_page:a.dtKegiatan.last_page,current_page:a.dtKegiatan.current_page,data:a.dtKegiatan.data.filter(a=>a.id!==e)}})),{status:"berhasil hapus",data:r.data}}catch(a){return{status:"error",data:a.response.data}}},updateData:async(e,t)=>{try{let r=await l.Z.getState().setToken(),s=await (0,n.Sj)({method:"PUT",url:"/kegiatan/".concat(e),headers:{Authorization:"Bearer ".concat(r)},data:t});return a(a=>({dtKegiatan:{last_page:a.dtKegiatan.last_page,current_page:a.dtKegiatan.current_page,data:a.dtKegiatan.data.map(a=>a.id===e?{...a,...s.data.data}:a)}})),{status:"berhasil update",data:s.data}}catch(a){return{status:"error",data:a.response.data}}}})));e.Z=i}},function(a){a.O(0,[447,990,954,222,628,382,769,128,295,971,596,560],function(){return a(a.s=2170)}),_N_E=a.O()}]);